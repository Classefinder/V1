<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Classefinder</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.1/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="stylemobile.css" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-search@3.0.0/dist/leaflet-search.min.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.13/dist/leaflet-routing-machine.js"></script>
    <script src="script.js"></script>
</body>
</html> 

<!--
// Définir les données GeoJSON pour chaque étage
var geojsonDataEtage1 = {
    "type": "FeatureCollection",
    "features": [
        { "type": "Feature", "properties": { "salle": "13" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 6.132443855592967, 45.936792791783532 ], [ 6.132451800410498, 45.936862076107261 ], [ 6.132332645198166, 45.936867696926917 ], [ 6.132323764318674, 45.936798784599809 ], [ 6.132443855592967, 45.936792791783532 ] ] ] ] } },
        { "type": "Feature", "properties": { "salle": "14" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 6.132323764318674, 45.93679878003244 ], [ 6.132332645193752, 45.936867696937178 ], [ 6.132169440848435, 45.936875476859768 ], [ 6.132160492656691, 45.936806544549889 ], [ 6.132323764318674, 45.93679878003244 ] ] ] ] } },       { "type": "Feature", "properties": { "salle": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 6.13281075656434, 45.937507327903141 ], [ 6.132811540684995, 45.937512671949321 ], [ 6.132903753273905, 45.937506782592266 ], [ 6.132903145580401, 45.937501043195077 ], [ 6.13281075656434, 45.937507327903141 ] ] ] ] } 
    }]
};

var geojsonDataEtage2 = {
    "type": "FeatureCollection",
    "features": [
        { "type": "Feature", "properties": { "salle": "24" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 6.132218592433576, 45.936723513388131 ], [ 6.132342978502976, 45.936718186750738 ], [ 6.132350944113331, 45.936783171692035 ], [ 6.132225945304675, 45.936788498323175 ], [ 6.132218592433576, 45.936723513388131 ] ] ] } },
        { "type": "Feature", "properties": { "salle": "23" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 6.132094512733808, 45.936727987763149 ], [ 6.132218592433576, 45.936723939519112 ], [ 6.132224719826159, 45.936788285257947 ], [ 6.132100946496017, 45.936793611888618 ], [ 6.132094512733808, 45.936727987763149 ] ] ] }
    }]
};








// Barre de recherche
var searchControl = new L.Control.Search({
    layer: L.layerGroup([layerEtage1, layerEtage2]), // Groupement des calques
    propertyName: 'salle',
    initial: false,
    collapsed: false,
    position: 'topright',
    zoom: 21,
    marker: false,
    autocomplete: true,
    moveToLocation: function(latlng, title, map) {
        var foundLayers = [];
        var bounds = L.latLngBounds();

        // Étape 1 : Recherche uniquement sur le calque actif
        activeLayer.eachLayer(function(subLayer) {
            if (subLayer.feature && subLayer.feature.properties.salle === title) {
                foundLayers.push(subLayer);
                bounds.extend(subLayer.getBounds());
            }
        });

        // Si des résultats sont trouvés sur le calque actif
        if (foundLayers.length > 0) {
            highlightResults(foundLayers, bounds);

            if (bounds.isValid()) {
                map.fitBounds(bounds, { padding: [20, 20] });
            }
            return;
        }

        // Étape 2 : Recherche globale uniquement si aucun résultat n'a été trouvé sur le calque actif
        var globalFoundLayers = [];
        var globalBounds = L.latLngBounds();
        var targetLayer = null;

        [layerEtage1, layerEtage2].forEach(function(layer) {
            if (layer !== activeLayer) { // Ne pas re-rechercher dans le calque actif
                layer.eachLayer(function(subLayer) {
                    if (subLayer.feature && subLayer.feature.properties.salle === title) {
                        globalFoundLayers.push(subLayer);
                        globalBounds.extend(subLayer.getBounds());
                        targetLayer = layer;
                    }
                });
            }
        });

        if (globalFoundLayers.length > 0) {
            // Changer de calque uniquement si le résultat est trouvé dans un autre calque
            if (targetLayer && targetLayer !== activeLayer) {
                map.eachLayer(function(layer) {
                    if (layer instanceof L.GeoJSON) {
                        layer.remove();
                    }
                });
                targetLayer.addTo(map);
                activeLayer = targetLayer;
            }

            // Surligner les résultats et ajuster la vue
            highlightResults(globalFoundLayers, globalBounds);

            if (globalBounds.isValid()) {
                map.fitBounds(globalBounds, { padding: [20, 20] });
            }
        }
    }
});

map.addControl(searchControl);
document.querySelector('.leaflet-control-search input').placeholder = "Rechercher...";

-->